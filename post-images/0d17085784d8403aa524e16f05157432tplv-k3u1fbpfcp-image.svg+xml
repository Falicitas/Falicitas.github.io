<svg id="SvgjsSvg1006" width="1064.53125" height="989.3125" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"><pattern patternUnits="userSpaceOnUse" id="pattern_mark_0" width="300" height="300"><text x="150" y="100" fill="rgba(229,229,229,0.8)" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text></pattern><pattern patternUnits="userSpaceOnUse" id="pattern_mark_1" width="300" height="300"><text x="150" y="200" fill="rgba(229,229,229,0.8)" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text></pattern></defs><rect id="svgbackgroundid" width="1064.53125" height="989.3125" fill="transparent"></rect><rect id="SvgjsRect1009" width="1064.53125" height="989.3125" fill="url(#pattern_mark_0)"></rect><rect id="SvgjsRect1010" width="1064.53125" height="989.3125" fill="url(#pattern_mark_1)"></rect><g id="SvgjsG1011" transform="translate(25,77.3125)"><path id="SvgjsPath1012" d="M 33.5 30L 33.5 887" stroke-dasharray="3,4" stroke="rgba(33,41,48,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1013" d="M 0 0L 67 0L 67 30L 0 30Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e74f4c"></path><g id="SvgjsG1014"><text id="SvgjsText1015" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="47px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.375" transform="rotate(0)"><tspan id="SvgjsTspan1016" dy="16" x="33.5"><tspan id="SvgjsTspan1017" style="text-decoration:;">事务一</tspan></tspan></text></g></g><g id="SvgjsG1018" transform="translate(839.4615384615383,77.31249999999991)"><path id="SvgjsPath1019" d="M 38.53846153846143 30L 38.53846153846143 837.1538461538462" stroke-dasharray="3,4" stroke="rgba(33,41,48,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1020" d="M 0 0L 77.07692307692287 0L 77.07692307692287 30L 0 30Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e74f4c"></path><g id="SvgjsG1021"><text id="SvgjsText1022" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="58px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.375" transform="rotate(0)"><tspan id="SvgjsTspan1023" dy="16" x="39"><tspan id="SvgjsTspan1024" style="text-decoration:;">事务二</tspan></tspan></text></g></g><g id="SvgjsG1025" transform="translate(48,159.3125)"><path id="SvgjsPath1026" d="M 0 0L 20 0L 20 58L 0 58Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1027"><text id="SvgjsText1028" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1029" transform="translate(80,172.3125)"><path id="SvgjsPath1030" d="M 0 0L 101 0L 101 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1031"><text id="SvgjsText1032" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.875" transform="rotate(0)"><tspan id="SvgjsTspan1033" dy="16" x="50.5"><tspan id="SvgjsTspan1034" style="text-decoration:;">1.1 获取DB锁，</tspan></tspan><tspan id="SvgjsTspan1035" dy="16" x="50.5"><tspan id="SvgjsTspan1036" style="text-decoration:;">保存快照</tspan></tspan></text></g></g><g id="SvgjsG1037" transform="translate(431.49400000000037,25.00480769230768)"><path id="SvgjsPath1038" d="M0 0L119.9819988 0L119.9819988 40 L0 40Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#f0f0f0"></path><path id="SvgjsPath1039" d="M119.9819988 0L240.012 0L240.012 40 L119.9819988 40Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#f0f0f0"></path><path id="SvgjsPath1040" d="M0 40L119.9819988 40L119.9819988 80 L0 80Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1041" d="M119.9819988 40L240.012 40L240.012 80 L119.9819988 80Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1042"><text id="SvgjsText1043" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1044" dy="20" x="60"><tspan id="SvgjsTspan1045" style="text-decoration:;">id</tspan></tspan></text></g><g id="SvgjsG1046"><text id="SvgjsText1047" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="121px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1048" dy="20" x="180.48199879999999"><tspan id="SvgjsTspan1049" style="text-decoration:;">money</tspan></tspan></text></g><g id="SvgjsG1050"><text id="SvgjsText1051" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="46" transform="rotate(0)"><tspan id="SvgjsTspan1052" dy="20" x="60"><tspan id="SvgjsTspan1053" style="text-decoration:;">1</tspan></tspan></text></g><g id="SvgjsG1054"><text id="SvgjsText1055" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="121px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="46" transform="rotate(0)"><tspan id="SvgjsTspan1056" dy="20" x="180.48199879999999"><tspan id="SvgjsTspan1057" style="text-decoration:;">100</tspan></tspan></text></g></g><g id="SvgjsG1058" transform="translate(181,111.3125)"><path id="SvgjsPath1059" d="M 0 0L 440 0L 440 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1060"><text id="SvgjsText1061" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="440px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1062" dy="16" x="220"><tspan id="SvgjsTspan1063" style="text-decoration:;">update account set money = money - 10 where id = 1; </tspan></tspan></text></g></g><g id="SvgjsG1064" transform="translate(228.61538461538464,159.3125)"><path id="SvgjsPath1065" d="M 0 0L 221.69230769230762 0L 237.69230769230762 16L 237.69230769230762 45.923076923076906L 0 45.923076923076906L 0 0Z" stroke="none" fill-opacity="1" fill="#fff7bc"></path><path id="SvgjsPath1066" d="M 221.69230769230762 0L 221.69230769230762 16L 237.69230769230762 16Z" stroke="none" fill-opacity="1" fill="#e4d089"></path><path id="SvgjsPath1067" d="M 0 0L 221.69230769230762 0L 237.69230769230762 16L 237.69230769230762 45.923076923076906L 0 45.923076923076906L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG1068"><text id="SvgjsText1069" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="218px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.336538461538453" transform="rotate(0)"><tspan id="SvgjsTspan1070" dy="16" x="119"><tspan id="SvgjsTspan1071" style="text-decoration:;">{"id":1,"money":100}</tspan></tspan></text></g></g><g id="SvgjsG1072" transform="translate(47.99999999999994,267.77403846153845)"><path id="SvgjsPath1073" d="M 0 0L 20 0L 20 58L 0 58Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1074"><text id="SvgjsText1075" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1076" transform="translate(79.99999999999989,285.7740384615384)"><path id="SvgjsPath1077" d="M 0 0L 117.84615384615392 0L 117.84615384615392 40.00000000000006L 0 40.00000000000006Z" stroke="none" fill="none"></path><g id="SvgjsG1078"><text id="SvgjsText1079" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="118px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.8750000000000284" transform="rotate(0)"><tspan id="SvgjsTspan1080" dy="16" x="59"><tspan id="SvgjsTspan1081" style="text-decoration:;">1.2 执行业务sql 执</tspan></tspan><tspan id="SvgjsTspan1082" dy="16" x="59"><tspan id="SvgjsTspan1083" style="text-decoration:;">行set money = 90</tspan></tspan></text></g></g><g id="SvgjsG1084" transform="translate(47.99999999999983,382.38942307692315)"><path id="SvgjsPath1085" d="M 0 0L 20 0L 20 58L 0 58Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1086"><text id="SvgjsText1087" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1088" transform="translate(75.38461538461513,400.3894230769227)"><path id="SvgjsPath1089" d="M 0 0L 147.8461538461541 0L 147.8461538461541 40.000000000000455L 0 40.000000000000455Z" stroke="none" fill="none"></path><g id="SvgjsG1090"><text id="SvgjsText1091" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="148px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375000000000227" transform="rotate(0)"><tspan id="SvgjsTspan1092" dy="16" x="74"><tspan id="SvgjsTspan1093" style="text-decoration:;">1.3 提交事务，释放DB锁</tspan></tspan></text></g></g><g id="SvgjsG1094" transform="translate(867.9999999999991,463.92788461538487)"><path id="SvgjsPath1095" d="M 0 0L 20 0L 20 58L 0 58Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1096"><text id="SvgjsText1097" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1098" transform="translate(899.9999999999998,472.9278846153853)"><path id="SvgjsPath1099" d="M 0 0L 101 0L 101 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1100"><text id="SvgjsText1101" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.875" transform="rotate(0)"><tspan id="SvgjsTspan1102" dy="16" x="50.5"><tspan id="SvgjsTspan1103" style="text-decoration:;">1.1 获取DB锁，</tspan></tspan><tspan id="SvgjsTspan1104" dy="16" x="50.5"><tspan id="SvgjsTspan1105" style="text-decoration:;">保存快照</tspan></tspan></text></g></g><g id="SvgjsG1106" transform="translate(613.2307692307687,469.96634615384664)"><path id="SvgjsPath1107" d="M 0 0L 221.69230769230762 0L 237.69230769230762 16L 237.69230769230762 45.923076923076906L 0 45.923076923076906L 0 0Z" stroke="none" fill-opacity="1" fill="#fff7bc"></path><path id="SvgjsPath1108" d="M 221.69230769230762 0L 221.69230769230762 16L 237.69230769230762 16Z" stroke="none" fill-opacity="1" fill="#e4d089"></path><path id="SvgjsPath1109" d="M 0 0L 221.69230769230762 0L 237.69230769230762 16L 237.69230769230762 45.923076923076906L 0 45.923076923076906L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG1110"><text id="SvgjsText1111" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="218px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.336538461538453" transform="rotate(0)"><tspan id="SvgjsTspan1112" dy="16" x="119"><tspan id="SvgjsTspan1113" style="text-decoration:;">{"id":1,"money":90}</tspan></tspan></text></g></g><g id="SvgjsG1114" transform="translate(867.9999999999995,579.3124999999999)"><path id="SvgjsPath1115" d="M 0 0L 20 0L 20 58L 0 58Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1116"><text id="SvgjsText1117" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1118" transform="translate(900.0000000000007,588.3125000000003)"><path id="SvgjsPath1119" d="M 0 0L 117.84615384615392 0L 117.84615384615392 40.00000000000006L 0 40.00000000000006Z" stroke="none" fill="none"></path><g id="SvgjsG1120"><text id="SvgjsText1121" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="118px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.8750000000000284" transform="rotate(0)"><tspan id="SvgjsTspan1122" dy="16" x="59"><tspan id="SvgjsTspan1123" style="text-decoration:;">1.2 执行业务sql 执</tspan></tspan><tspan id="SvgjsTspan1124" dy="16" x="59"><tspan id="SvgjsTspan1125" style="text-decoration:;">行set money = 80</tspan></tspan></text></g></g><g id="SvgjsG1126" transform="translate(867.9999999999998,683.158653846153)"><path id="SvgjsPath1127" d="M 0 0L 20 0L 20 58L 0 58Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1128"><text id="SvgjsText1129" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1130" transform="translate(891.5384615384612,692.1586538461524)"><path id="SvgjsPath1131" d="M 0 0L 147.8461538461541 0L 147.8461538461541 40.000000000000455L 0 40.000000000000455Z" stroke="none" fill="none"></path><g id="SvgjsG1132"><text id="SvgjsText1133" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="148px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375000000000227" transform="rotate(0)"><tspan id="SvgjsTspan1134" dy="16" x="74"><tspan id="SvgjsTspan1135" style="text-decoration:;">1.3 提交事务，释放DB锁</tspan></tspan></text></g></g><g id="SvgjsG1136" transform="translate(47.999999999999886,790.8509615384613)"><path id="SvgjsPath1137" d="M 0 0L 20 0L 20 58L 0 58Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1138"><text id="SvgjsText1139" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1140" transform="translate(67.99999999999966,799.8509615384611)"><path id="SvgjsPath1141" d="M 0 0L 150.61538461538493 0L 150.61538461538493 40.000000000000455L 0 40.000000000000455Z" stroke="none" fill="none"></path><g id="SvgjsG1142"><text id="SvgjsText1143" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="151px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.8750000000002274" transform="rotate(0)"><tspan id="SvgjsTspan1144" dy="16" x="75.5"><tspan id="SvgjsTspan1145" style="text-decoration:;">2.1 获取DB锁，根据快照</tspan></tspan><tspan id="SvgjsTspan1146" dy="16" x="75.5"><tspan id="SvgjsTspan1147" style="text-decoration:;">恢复数据</tspan></tspan></text></g></g><g id="SvgjsG1148" transform="translate(239.38461538461524,799.8509615384609)"><path id="SvgjsPath1149" d="M 0 0L 221.69230769230762 0L 237.69230769230762 16L 237.69230769230762 45.923076923076906L 0 45.923076923076906L 0 0Z" stroke="none" fill-opacity="1" fill="#fff7bc"></path><path id="SvgjsPath1150" d="M 221.69230769230762 0L 221.69230769230762 16L 237.69230769230762 16Z" stroke="none" fill-opacity="1" fill="#e4d089"></path><path id="SvgjsPath1151" d="M 0 0L 221.69230769230762 0L 237.69230769230762 16L 237.69230769230762 45.923076923076906L 0 45.923076923076906L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG1152"><text id="SvgjsText1153" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="218px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.336538461538453" transform="rotate(0)"><tspan id="SvgjsTspan1154" dy="16" x="119"><tspan id="SvgjsTspan1155" style="text-decoration:;">{"id":1,"money":100}</tspan></tspan></text></g></g></svg>