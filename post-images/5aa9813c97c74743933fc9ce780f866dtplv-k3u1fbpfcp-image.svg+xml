<svg id="SvgjsSvg1006" width="1201.9375" height="1116.296875" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"><pattern patternUnits="userSpaceOnUse" id="pattern_mark_0" width="300" height="300"><text x="150" y="100" fill="rgba(229,229,229,0.8)" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text></pattern><pattern patternUnits="userSpaceOnUse" id="pattern_mark_1" width="300" height="300"><text x="150" y="200" fill="rgba(229,229,229,0.8)" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text></pattern><marker id="SvgjsMarker1160" markerWidth="13" markerHeight="9" refX="9.5" refY="4.5" viewBox="0 0 13 9" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1161" d="M0,0 L13,4.5 L0,9 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1209" markerWidth="13" markerHeight="9" refX="9.5" refY="4.5" viewBox="0 0 13 9" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1210" d="M0,0 L13,4.5 L0,9 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker1260" markerWidth="13" markerHeight="9" refX="9.5" refY="4.5" viewBox="0 0 13 9" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath1261" d="M0,0 L13,4.5 L0,9 L0,0" fill="#323232" stroke="#323232" stroke-width="1"></path></marker></defs><rect id="svgbackgroundid" width="1201.9375" height="1116.296875" fill="transparent"></rect><rect id="SvgjsRect1009" width="1201.9375" height="1116.296875" fill="url(#pattern_mark_0)"></rect><rect id="SvgjsRect1010" width="1201.9375" height="1116.296875" fill="url(#pattern_mark_1)"></rect><g id="SvgjsG1011" transform="translate(166,77.30769230769238)"><path id="SvgjsPath1012" d="M 32.99999999999977 30L 32.99999999999977 983.1923076923076" stroke-dasharray="3,4" stroke="rgba(33,41,48,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1013" d="M 0 0L 65.99999999999955 0L 65.99999999999955 30L 0 30Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e74f4c"></path><g id="SvgjsG1014"><text id="SvgjsText1015" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="46px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.375" transform="rotate(0)"><tspan id="SvgjsTspan1016" dy="16" x="33"><tspan id="SvgjsTspan1017" style="text-decoration:;">事务一</tspan></tspan></text></g></g><g id="SvgjsG1018" transform="translate(980.4615384615383,77.30769230769226)"><path id="SvgjsPath1019" d="M 38.538461538461206 30L 38.538461538461206 1014.1923076923077" stroke-dasharray="3,4" stroke="rgba(33,41,48,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath1020" d="M 0 0L 77.07692307692241 0L 77.07692307692241 30L 0 30Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e74f4c"></path><g id="SvgjsG1021"><text id="SvgjsText1022" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="58px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="4.375" transform="rotate(0)"><tspan id="SvgjsTspan1023" dy="16" x="39"><tspan id="SvgjsTspan1024" style="text-decoration:;">事务二</tspan></tspan></text></g></g><g id="SvgjsG1025" transform="translate(189,159.30769230769238)"><path id="SvgjsPath1026" d="M 0 0L 20 0L 20 58L 0 58Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1027"><text id="SvgjsText1028" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1029" transform="translate(221,172.30769230769238)"><path id="SvgjsPath1030" d="M 0 0L 101 0L 101 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1031"><text id="SvgjsText1032" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.875" transform="rotate(0)"><tspan id="SvgjsTspan1033" dy="16" x="50.5"><tspan id="SvgjsTspan1034" style="text-decoration:;">1.1 获取DB锁，</tspan></tspan><tspan id="SvgjsTspan1035" dy="16" x="50.5"><tspan id="SvgjsTspan1036" style="text-decoration:;">保存快照</tspan></tspan></text></g></g><g id="SvgjsG1037" transform="translate(572.4940000000004,25)"><path id="SvgjsPath1038" d="M0 0L119.9819988 0L119.9819988 40 L0 40Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#f0f0f0"></path><path id="SvgjsPath1039" d="M119.9819988 0L240.012 0L240.012 40 L119.9819988 40Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#f0f0f0"></path><path id="SvgjsPath1040" d="M0 40L119.9819988 40L119.9819988 80 L0 80Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1041" d="M119.9819988 40L240.012 40L240.012 80 L119.9819988 80Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1042"><text id="SvgjsText1043" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1044" dy="20" x="60"><tspan id="SvgjsTspan1045" style="text-decoration:;">id</tspan></tspan></text></g><g id="SvgjsG1046"><text id="SvgjsText1047" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="121px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1048" dy="20" x="180.48199879999999"><tspan id="SvgjsTspan1049" style="text-decoration:;">money</tspan></tspan></text></g><g id="SvgjsG1050"><text id="SvgjsText1051" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="46" transform="rotate(0)"><tspan id="SvgjsTspan1052" dy="20" x="60"><tspan id="SvgjsTspan1053" style="text-decoration:;">1</tspan></tspan></text></g><g id="SvgjsG1054"><text id="SvgjsText1055" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="121px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="46" transform="rotate(0)"><tspan id="SvgjsTspan1056" dy="20" x="180.48199879999999"><tspan id="SvgjsTspan1057" style="text-decoration:;">100</tspan></tspan></text></g></g><g id="SvgjsG1058" transform="translate(322,111.30769230769238)"><path id="SvgjsPath1059" d="M 0 0L 440 0L 440 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1060"><text id="SvgjsText1061" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="440px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1062" dy="16" x="220"><tspan id="SvgjsTspan1063" style="text-decoration:;">update account set money = money - 10 where id = 1; </tspan></tspan></text></g></g><g id="SvgjsG1064" transform="translate(369.61538461538476,159.30769230769238)"><path id="SvgjsPath1065" d="M 0 0L 221.69230769230762 0L 237.69230769230762 16L 237.69230769230762 45.923076923076906L 0 45.923076923076906L 0 0Z" stroke="none" fill-opacity="1" fill="#fff7bc"></path><path id="SvgjsPath1066" d="M 221.69230769230762 0L 221.69230769230762 16L 237.69230769230762 16Z" stroke="none" fill-opacity="1" fill="#e4d089"></path><path id="SvgjsPath1067" d="M 0 0L 221.69230769230762 0L 237.69230769230762 16L 237.69230769230762 45.923076923076906L 0 45.923076923076906L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG1068"><text id="SvgjsText1069" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="218px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.336538461538453" transform="rotate(0)"><tspan id="SvgjsTspan1070" dy="16" x="119"><tspan id="SvgjsTspan1071" style="text-decoration:;">{"id":1,"money":100}</tspan></tspan></text></g></g><g id="SvgjsG1072" transform="translate(189,267.7692307692307)"><path id="SvgjsPath1073" d="M 0 0L 20 0L 20 58L 0 58Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1074"><text id="SvgjsText1075" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1076" transform="translate(221,285.7692307692307)"><path id="SvgjsPath1077" d="M 0 0L 117.84615384615392 0L 117.84615384615392 40.00000000000006L 0 40.00000000000006Z" stroke="none" fill="none"></path><g id="SvgjsG1078"><text id="SvgjsText1079" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="118px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.8750000000000284" transform="rotate(0)"><tspan id="SvgjsTspan1080" dy="16" x="59"><tspan id="SvgjsTspan1081" style="text-decoration:;">1.2 执行业务sql 执</tspan></tspan><tspan id="SvgjsTspan1082" dy="16" x="59"><tspan id="SvgjsTspan1083" style="text-decoration:;">行set money = 90</tspan></tspan></text></g></g><g id="SvgjsG1084" transform="translate(188.99999999999977,382.3846153846155)"><path id="SvgjsPath1085" d="M 0 0L 20 0L 20 58L 0 58Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1086"><text id="SvgjsText1087" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1088" transform="translate(216.38461538461524,400.384615384615)"><path id="SvgjsPath1089" d="M 0 0L 147.8461538461541 0L 147.8461538461541 40.000000000000455L 0 40.000000000000455Z" stroke="none" fill="none"></path><g id="SvgjsG1090"><text id="SvgjsText1091" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="148px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375000000000227" transform="rotate(0)"><tspan id="SvgjsTspan1092" dy="16" x="74"><tspan id="SvgjsTspan1093" style="text-decoration:;">1.3 提交事务，释放DB锁</tspan></tspan></text></g></g><g id="SvgjsG1094" transform="translate(1008.9999999999991,463.92307692307713)"><path id="SvgjsPath1095" d="M 0 0L 20 0L 20 58L 0 58Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1096"><text id="SvgjsText1097" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1098" transform="translate(1040.9999999999998,472.9230769230776)"><path id="SvgjsPath1099" d="M 0 0L 101 0L 101 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1100"><text id="SvgjsText1101" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="101px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.875" transform="rotate(0)"><tspan id="SvgjsTspan1102" dy="16" x="50.5"><tspan id="SvgjsTspan1103" style="text-decoration:;">1.1 获取DB锁，</tspan></tspan><tspan id="SvgjsTspan1104" dy="16" x="50.5"><tspan id="SvgjsTspan1105" style="text-decoration:;">保存快照</tspan></tspan></text></g></g><g id="SvgjsG1106" transform="translate(754.2307692307686,469.961538461539)"><path id="SvgjsPath1107" d="M 0 0L 221.69230769230762 0L 237.69230769230762 16L 237.69230769230762 45.923076923076906L 0 45.923076923076906L 0 0Z" stroke="none" fill-opacity="1" fill="#fff7bc"></path><path id="SvgjsPath1108" d="M 221.69230769230762 0L 221.69230769230762 16L 237.69230769230762 16Z" stroke="none" fill-opacity="1" fill="#e4d089"></path><path id="SvgjsPath1109" d="M 0 0L 221.69230769230762 0L 237.69230769230762 16L 237.69230769230762 45.923076923076906L 0 45.923076923076906L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG1110"><text id="SvgjsText1111" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="218px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.336538461538453" transform="rotate(0)"><tspan id="SvgjsTspan1112" dy="16" x="119"><tspan id="SvgjsTspan1113" style="text-decoration:;">{"id":1,"money":90}</tspan></tspan></text></g></g><g id="SvgjsG1114" transform="translate(1008.9999999999995,579.3076923076922)"><path id="SvgjsPath1115" d="M 0 0L 20 0L 20 58L 0 58Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1116"><text id="SvgjsText1117" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1118" transform="translate(1041.0000000000007,588.3076923076926)"><path id="SvgjsPath1119" d="M 0 0L 117.84615384615392 0L 117.84615384615392 40.00000000000006L 0 40.00000000000006Z" stroke="none" fill="none"></path><g id="SvgjsG1120"><text id="SvgjsText1121" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="118px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.8750000000000284" transform="rotate(0)"><tspan id="SvgjsTspan1122" dy="16" x="59"><tspan id="SvgjsTspan1123" style="text-decoration:;">1.2 执行业务sql 执</tspan></tspan><tspan id="SvgjsTspan1124" dy="16" x="59"><tspan id="SvgjsTspan1125" style="text-decoration:;">行set money = 80</tspan></tspan></text></g></g><g id="SvgjsG1126" transform="translate(1009,868.1538461538455)"><path id="SvgjsPath1127" d="M 0 0L 20 0L 20 58L 0 58Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1128"><text id="SvgjsText1129" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1130" transform="translate(1028.9999999999995,882.153846153845)"><path id="SvgjsPath1131" d="M 0 0L 147.8461538461541 0L 147.8461538461541 40.000000000000455L 0 40.000000000000455Z" stroke="none" fill="none"></path><g id="SvgjsG1132"><text id="SvgjsText1133" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="148px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.8750000000002274" transform="rotate(0)"><tspan id="SvgjsTspan1134" dy="16" x="74"><tspan id="SvgjsTspan1135" style="text-decoration:;">1.4 任务超时，回滚并释</tspan></tspan><tspan id="SvgjsTspan1136" dy="16" x="74"><tspan id="SvgjsTspan1137" style="text-decoration:;">放DB锁</tspan></tspan></text></g></g><g id="SvgjsG1138" transform="translate(187,877.8461538461536)"><path id="SvgjsPath1139" d="M 0 0L 20 0L 20 58L 0 58Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1140"><text id="SvgjsText1141" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="18.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1142" transform="translate(216.38461538461524,886.8461538461534)"><path id="SvgjsPath1143" d="M 0 0L 150.61538461538493 0L 150.61538461538493 40.000000000000455L 0 40.000000000000455Z" stroke="none" fill="none"></path><g id="SvgjsG1144"><text id="SvgjsText1145" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="151px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="0.8750000000002274" transform="rotate(0)"><tspan id="SvgjsTspan1146" dy="16" x="75.5"><tspan id="SvgjsTspan1147" style="text-decoration:;">2.1 获取DB锁，根据快照</tspan></tspan><tspan id="SvgjsTspan1148" dy="16" x="75.5"><tspan id="SvgjsTspan1149" style="text-decoration:;">恢复数据</tspan></tspan></text></g></g><g id="SvgjsG1150" transform="translate(382.3846153846152,883.8846153846151)"><path id="SvgjsPath1151" d="M 0 0L 221.69230769230762 0L 237.69230769230762 16L 237.69230769230762 45.923076923076906L 0 45.923076923076906L 0 0Z" stroke="none" fill-opacity="1" fill="#fff7bc"></path><path id="SvgjsPath1152" d="M 221.69230769230762 0L 221.69230769230762 16L 237.69230769230762 16Z" stroke="none" fill-opacity="1" fill="#e4d089"></path><path id="SvgjsPath1153" d="M 0 0L 221.69230769230762 0L 237.69230769230762 16L 237.69230769230762 45.923076923076906L 0 45.923076923076906L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG1154"><text id="SvgjsText1155" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="218px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.336538461538453" transform="rotate(0)"><tspan id="SvgjsTspan1156" dy="16" x="119"><tspan id="SvgjsTspan1157" style="text-decoration:;">{"id":1,"money":100}</tspan></tspan></text></g></g><g id="SvgjsG1158"><path id="SvgjsPath1159" d="M29 358.5L109 358.5L109 358.5L189 358.5" stroke="#323232" stroke-width="1.5" fill="none" marker-end="url(#SvgjsMarker1160)"></path></g><g id="SvgjsG1162" transform="translate(28,317.5)"><path id="SvgjsPath1163" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1164"><text id="SvgjsText1165" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="100px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1166" dy="16" x="50"><tspan id="SvgjsTspan1167" style="text-decoration:;">获取全局锁</tspan></tspan></text></g></g><g id="SvgjsG1168" transform="translate(390.2307692307686,325.7692307692308)"><path id="SvgjsPath1169" d="M 0 0L 364 0L 364 63.88461538461502L 0 63.88461538461502Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1170"><text id="SvgjsText1171" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="344px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="12.817307692307509" transform="rotate(0)"><tspan id="SvgjsTspan1172" dy="16" x="182"><tspan id="SvgjsTspan1173" style="text-decoration:;">全局锁：由TC记录当前正在操作某行数据的事务，该事务持</tspan></tspan><tspan id="SvgjsTspan1174" dy="16" x="182"><tspan id="SvgjsTspan1175" style="text-decoration:;">有全局锁，具备执行权。</tspan></tspan></text></g></g><g id="SvgjsG1176" transform="translate(390.2307692307686,409)"><path id="SvgjsPath1177" d="M0 0L119.96599440000001 0L119.96599440000001 40 L0 40Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#f0f0f0"></path><path id="SvgjsPath1178" d="M119.96599440000001 0L240.00399720000001 0L240.00399720000001 40 L119.96599440000001 40Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#f0f0f0"></path><path id="SvgjsPath1179" d="M240.00399720000001 0L360.04200000000003 0L360.04200000000003 40 L240.00399720000001 40Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#f0f0f0"></path><path id="SvgjsPath1180" d="M0 40L119.96599440000001 40L119.96599440000001 80 L0 80Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1181" d="M119.96599440000001 40L240.00399720000001 40L240.00399720000001 80 L119.96599440000001 80Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><path id="SvgjsPath1182" d="M240.00399720000001 40L360.04200000000003 40L360.04200000000003 80 L240.00399720000001 80Z" stroke="rgba(102, 102, 102,1)" stroke-width="1" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1183"><text id="SvgjsText1184" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1185" dy="20" x="60"><tspan id="SvgjsTspan1186" style="text-decoration:;">xid</tspan></tspan></text></g><g id="SvgjsG1187"><text id="SvgjsText1188" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="121px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1189" dy="20" x="180.4659944"><tspan id="SvgjsTspan1190" style="text-decoration:;">table</tspan></tspan></text></g><g id="SvgjsG1191"><text id="SvgjsText1192" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="121px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan1193" dy="20" x="300.5039972"><tspan id="SvgjsTspan1194" style="text-decoration:;">pk</tspan></tspan></text></g><g id="SvgjsG1195"><text id="SvgjsText1196" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="120px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="46" transform="rotate(0)"><tspan id="SvgjsTspan1197" dy="20" x="60"><tspan id="SvgjsTspan1198" style="text-decoration:;">事务1</tspan></tspan></text></g><g id="SvgjsG1199"><text id="SvgjsText1200" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="121px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="46" transform="rotate(0)"><tspan id="SvgjsTspan1201" dy="20" x="180.4659944"><tspan id="SvgjsTspan1202" style="text-decoration:;">account</tspan></tspan></text></g><g id="SvgjsG1203"><text id="SvgjsText1204" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="121px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="16px" weight="400" font-style="" opacity="1" y="46" transform="rotate(0)"><tspan id="SvgjsTspan1205" dy="20" x="300.5039972"><tspan id="SvgjsTspan1206" style="text-decoration:;">1</tspan></tspan></text></g></g><g id="SvgjsG1207"><path id="SvgjsPath1208" d="M856 707.5L936 707.5L936 707.5L1016 707.5" stroke="#323232" stroke-width="1.5" fill="none" marker-end="url(#SvgjsMarker1209)"></path></g><g id="SvgjsG1211" transform="translate(841,665.5)"><path id="SvgjsPath1212" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1213"><text id="SvgjsText1214" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="100px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1215" dy="16" x="50"><tspan id="SvgjsTspan1216" style="text-decoration:;">获取全局锁</tspan></tspan></text></g></g><g id="SvgjsG1217" transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,966.9999812199524,776.4999812199524)"><path id="SvgjsPath1218" d="M 41.34615384615472 16.53846153846189Q 41.34615384615472 0 24.807692307692832 0L 21.500000000000455 0Q 4.9615384615385665 0 4.9615384615385665 16.53846153846189L 4.9615384615385665 35.2L 0 35.2L 10.129807692307907 44L 20.259615384615813 35.2L 15.298076923077247 35.2L 15.298076923077247 16.53846153846189Q 15.298076923077247 10.33653846153868 21.500000000000455 10.33653846153868L 24.807692307692832 10.33653846153868Q 31.00961538461604 10.33653846153868 31.00961538461604 16.53846153846189L 31.00961538461604 44L 41.34615384615472 44L 41.34615384615472 16.53846153846189Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e74f4c"></path><path id="SvgjsPath1219" d="M 0 0L 41.34615384615472 0L 41.34615384615472 44L 0 44Z" stroke="none" fill="none"></path><g id="SvgjsG1220"><text id="SvgjsText1221" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="32px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="11.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1222" transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,966.9999812199524,831.4999812199524)"><path id="SvgjsPath1223" d="M 41.34615384615472 16.53846153846189Q 41.34615384615472 0 24.807692307692832 0L 21.500000000000455 0Q 4.9615384615385665 0 4.9615384615385665 16.53846153846189L 4.9615384615385665 35.2L 0 35.2L 10.129807692307907 44L 20.259615384615813 35.2L 15.298076923077247 35.2L 15.298076923077247 16.53846153846189Q 15.298076923077247 10.33653846153868 21.500000000000455 10.33653846153868L 24.807692307692832 10.33653846153868Q 31.00961538461604 10.33653846153868 31.00961538461604 16.53846153846189L 31.00961538461604 44L 41.34615384615472 44L 41.34615384615472 16.53846153846189Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e74f4c"></path><path id="SvgjsPath1224" d="M 0 0L 41.34615384615472 0L 41.34615384615472 44L 0 44Z" stroke="none" fill="none"></path><g id="SvgjsG1225"><text id="SvgjsText1226" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="32px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="11.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1227" transform="translate(848.5060000000003,764.8461538461531)"><path id="SvgjsPath1228" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1229"><text id="SvgjsText1230" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="100px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="-7.125" transform="rotate(0)"><tspan id="SvgjsTspan1231" dy="16" x="50"><tspan id="SvgjsTspan1232" style="text-decoration:;">1.3 重试，默认</tspan></tspan><tspan id="SvgjsTspan1233" dy="16" x="50"><tspan id="SvgjsTspan1234" style="text-decoration:;">30次，间隔10毫</tspan></tspan><tspan id="SvgjsTspan1235" dy="16" x="50"><tspan id="SvgjsTspan1236" style="text-decoration:;">秒</tspan></tspan></text></g></g><g id="SvgjsG1237" transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,144.99999647874142,770.4999812199524)"><path id="SvgjsPath1238" d="M 41.34615384615472 16.53846153846189Q 41.34615384615472 0 24.807692307692832 0L 21.500000000000455 0Q 4.9615384615385665 0 4.9615384615385665 16.53846153846189L 4.9615384615385665 35.2L 0 35.2L 10.129807692307907 44L 20.259615384615813 35.2L 15.298076923077247 35.2L 15.298076923077247 16.53846153846189Q 15.298076923077247 10.33653846153868 21.500000000000455 10.33653846153868L 24.807692307692832 10.33653846153868Q 31.00961538461604 10.33653846153868 31.00961538461604 16.53846153846189L 31.00961538461604 44L 41.34615384615472 44L 41.34615384615472 16.53846153846189Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e74f4c"></path><path id="SvgjsPath1239" d="M 0 0L 41.34615384615472 0L 41.34615384615472 44L 0 44Z" stroke="none" fill="none"></path><g id="SvgjsG1240"><text id="SvgjsText1241" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="32px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="11.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1242" transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,142.99999647874142,815.4999812199524)"><path id="SvgjsPath1243" d="M 41.34615384615472 16.53846153846189Q 41.34615384615472 0 24.807692307692832 0L 21.500000000000455 0Q 4.9615384615385665 0 4.9615384615385665 16.53846153846189L 4.9615384615385665 35.2L 0 35.2L 10.129807692307907 44L 20.259615384615813 35.2L 15.298076923077247 35.2L 15.298076923077247 16.53846153846189Q 15.298076923077247 10.33653846153868 21.500000000000455 10.33653846153868L 24.807692307692832 10.33653846153868Q 31.00961538461604 10.33653846153868 31.00961538461604 16.53846153846189L 31.00961538461604 44L 41.34615384615472 44L 41.34615384615472 16.53846153846189Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#e74f4c"></path><path id="SvgjsPath1244" d="M 0 0L 41.34615384615472 0L 41.34615384615472 44L 0 44Z" stroke="none" fill="none"></path><g id="SvgjsG1245"><text id="SvgjsText1246" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="32px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="11.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1247" transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,143.99999647874142,860.4999812199524)"><path id="SvgjsPath1248" d="M 41.34615384615472 16.53846153846189Q 41.34615384615472 0 24.807692307692832 0L 21.500000000000455 0Q 4.9615384615385665 0 4.9615384615385665 16.53846153846189L 4.9615384615385665 35.2L 0 35.2L 10.129807692307907 44L 20.259615384615813 35.2L 15.298076923077247 35.2L 15.298076923077247 16.53846153846189Q 15.298076923077247 10.33653846153868 21.500000000000455 10.33653846153868L 24.807692307692832 10.33653846153868Q 31.00961538461604 10.33653846153868 31.00961538461604 16.53846153846189L 31.00961538461604 44L 41.34615384615472 44L 41.34615384615472 16.53846153846189Z" stroke="rgba(33,41,48,1)" stroke-width="1.5" fill-opacity="1" fill="#b0e38f"></path><path id="SvgjsPath1249" d="M 0 0L 41.34615384615472 0L 41.34615384615472 44L 0 44Z" stroke="none" fill="none"></path><g id="SvgjsG1250"><text id="SvgjsText1251" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="32px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="11.375" transform="rotate(0)"></text></g></g><g id="SvgjsG1252" transform="translate(35,750.1538461538453)"><path id="SvgjsPath1253" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1254"><text id="SvgjsText1255" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="100px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1256" dy="16" x="50"><tspan id="SvgjsTspan1257" style="text-decoration:;">等待DB锁</tspan></tspan></text></g></g><g id="SvgjsG1258"><path id="SvgjsPath1259" d="M25 997.5L105 997.5L105 997.5L185 997.5" stroke="#323232" stroke-width="1.5" fill="none" marker-end="url(#SvgjsMarker1260)"></path></g><g id="SvgjsG1262" transform="translate(28,960.5)"><path id="SvgjsPath1263" d="M 0 0L 100 0L 100 40L 0 40Z" stroke="none" fill="none"></path><g id="SvgjsG1264"><text id="SvgjsText1265" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="100px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan1266" dy="16" x="50"><tspan id="SvgjsTspan1267" style="text-decoration:;">释放全局锁</tspan></tspan></text></g></g></svg>